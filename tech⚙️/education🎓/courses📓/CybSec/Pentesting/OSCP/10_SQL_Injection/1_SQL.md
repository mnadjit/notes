---
aliases:
  - SQL Theory
tags:
  - tech
  - cybsec
  - offensive_security
  - offsec
  - oscp
  - web_application
  - web_app
  - sql_injection
  - sqli
author: Mehdi N Tehrani
creat_date: 2023-12-26
category: Cyber Security
subcategory: Offensive Security - OSCP
---

# mysql
## php msqli_query
#mysqli_query
```php
$result = mysqli_query($con, $sql_query)
```

## version
#version
```mysql
select version();
```

## system_user
#system_user
```mysql
select system_user();
```


# MSSQL
 #sql_server #mssql 
## tools
### sqlcmd
#sqlcmd
#### Install
[PowerShell SQLCMD](https://learn.microsoft.com/en-us/sql/tools/sqlcmd/sqlcmd-utility?view=sql-server-ver16&tabs=go%2Cwindows&pivots=cs1-powershell)
```powershell
PS C:\> winget install sqlcmd
```

[BASH SQLCMD](https://learn.microsoft.com/en-us/sql/tools/sqlcmd/sqlcmd-utility?view=sql-server-ver16&tabs=go%2Cwindows&pivots=cs1-bash)
```sh
$ curl https://packages.microsoft.com/keys/microsoft.asc | sudo tee /etc/apt/trusted.gpg.d/microsoft.asc
$ add-apt-repository "$(wget -qO- https://packages.microsoft.com/config/ubuntu/20.04/prod.list)"
$ apt-get update
$ apt-get install sqlcmd
```

```sql
# get databases with their tables
select table_schema,table_name from information_schema.tables;

# get columns, and their table and database names
select table_schema,table_name,column_name from information_schema.columns where table_name='users';
```

### impacket-mssqlclient
#impacket-mssqlclient #impacket #mssqlclient
Impacket is a Python framework that enables network protocol interactions. Among many other protocols, it support Tabular Data Stream (TDS).
#tds #tabular_data_stream
```sh
$ impacket-mssqlclient <user>:<pass>@<ip> -windows-auth
```
#ntlm
- `-windows-auth`: forces NTLM authentication vs Kerberos

#### version
```sql
select @@version;
Microsoft SQL Server 2019 (RTM) - 15.0.2000.5 (X64) 
        Sep 24 2019 13:48:23 
        Copyright (C) 2019 Microsoft Corporation
        Express Edition (64-bit) on Windows Server 2022 Standard 10.0 <X64> (Build 20348: ) (Hypervisor)
```

####Usage
```sql
SELECT name from sys.databases;

SELECT * from <db>.information_schema.tables;

SELECT * from <db>.dbo.users;
```


