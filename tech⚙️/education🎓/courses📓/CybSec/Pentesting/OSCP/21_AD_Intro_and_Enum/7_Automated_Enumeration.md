---
aliases:
  - Active Directory Enumeration
tags:
  - tech
  - cybsec
  - offensive_security
  - offsec
  - oscp
  - active_directory
  - ad
  - adds
  - enum
  - enumeration
  - automated
  - automation
author: Mehdi N Tehrani
creat_date: 2024-01-06
category: Cyber Security
subcategory: Offensive Security - OSCP
---

# Bloodhound
#bloodhound 
https://bloodhound.readthedocs.io/en/latest/
Used to analyze, organize and present the data

1. use Sharphound to collect data
```powershell
Import-Module .\Sharphound.ps1

# Sharphound data collection
Invoke-BloodHound -CollectionMethod All -OutputDirectory $outdir -OutputPrefix $outPrefix


```
2. Move .zip file to the attacker machine
3. On attacker machine start neo4j and then start bloodhound:
```sh
# neo4j
sudo neo4j start

# run bloodhound
bloodhound
```


### Looping
the collector will run cyclical queries of our choosing over a period of time. While the collection method `All` creates a snapshot over the domain, running it in a loop may gather additional data as the environment changes.
`.bin` cache file gets created by Sharphound to speed up data collection, but is not needed to import data into Bloodhound.

## Sharphound
#sharphound #remote_registry #net_wksta_enum #netwkstaenum #netsessionenum #net_session_enum 
https://bloodhound.readthedocs.io/en/latest/data-collection/sharphound.html
Companion data tool to Bloodhound
Used to collect data
- written in C#
- Mechanism:
	- uses Windows API functions and LDAP namespace functions
	- attempts to use `NetWkstaUserEnum` and `NetSessionEnum` to enumerate logged-on sessions
	- runs queries against the *Remote Registry service*

## neo4j
#neo4j 
https://neo4j.com/
An open source graph database (NoSQL) that creates nodes, edges, and properties instead of simple rows and columns. This facilitates the visual representation of our collected data.

Command: `sudo neo4j start`
Hosted on: http://localhost:7474
# PingCastle
#pingcastle 
https://www.pingcastle.com/
generate great reports although most require paid licenses for commercial use.