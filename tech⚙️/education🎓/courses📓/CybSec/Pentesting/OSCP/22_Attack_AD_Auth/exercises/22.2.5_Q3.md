
# Objective
**Capstone Exercise**: Once VM Group 3 is started, the domain _corp.com_ has been modified. By examining leaked password database sites, you discovered that the password _VimForPowerShell123!_ was previously used by a domain user. Spray this password against the domain users _meg_ and _backupuser_. Once you have identified a valid set of credentials, use the techniques from this Module to obtain access to the domain controller. You'll find the flag on the Desktop of the domain administrator on DC1. If you obtain a hash to crack, reuse the rule file from the previous exercise.
# Hosts
```
192.168.201.70 (DC1)
192.168.201.72 (WEB04)
192.168.201.73 (FILES04)
192.168.201.74 (client74)
192.168.201.75 (client75)
```

## Local Admins
```
Get-LocalGroupMember administrators


```

## Sessions
```cmd
qwinsata

 
```

# Domain
```
net accounts


```

# User
```
whoami /all


```

```powershell
$users=Get-DomainUser
$groups=Get-DomainGroup
$comps=Get-DomainComputer
$acls=Get-ObjectAcl
$shares=Find-DomainShare -CheckShareAccess
$locads=Find-LocalAdminAccess
$npuser=Get-DomainUser -PreauthNotRequired
$krbr=Get-NetUser -SPN
```

## Domain
```
Get-NetDomain


```

## local admin computers
```powershell
Find-LocalAdminAcess


```
## Shares
```
 $shares


```
## User No-Preauth Required
AS-REP roastable
```

PS C:\> $npuser | select cn

```
## USER Kerberoastable
```
PS C:\> $krbr | select cn

```

## USERS
```

```
## USER: 

```

```

## Domain GROUPS
```
Administrators
	jeffadmin
	Domain Admins
		maria, jeffadmin
	Enterprise Admins
	Administrator

Sales Department
	pete, stephanie
	Development Department
		pete, dave
		Management Department
	
```

## Files

## Credentials
### Passwords
password provided, user found by password spraying
```
meg:VimForPowerShell123!
```
Kerberoasting DC1 using meg's credentials
```
iis_service:Strawberry1
backupuser:DonovanJadeKnight1
```
## outbound user permissions




# Attack path
1. find out the provided belongs to whom: it's `meg`
2. try kerberoasting using meg's account against DC1
	- Found crednetials for `iis_service` and `backupuser`
3. use `evil-winrm` to access `DC1` and get the flag